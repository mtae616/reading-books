# 객체지향 프로그래밍
- 영화 예매
  - 영화 / 상영
  - 영화 : 기본 정보
  - 상영 : 영화를 관람하는 사건
  - 할인액 결정 규칙 : 할인 조건 / 할인 정책
    - 할인 조건
      - 순서 조건 : 상영 순번에 할인 여부
      - 기간 조건 : 상영 시작 시간에 할인 여
    - 할인 정책
      - 금액 할인 정책 : 일정 금액 할인
      - 비율 할인 정책 : 일정 비율 할인
- 협력, 객체, 클래스
  - 객체 지향은 객체를 지향하는 것 -> class
    - 이 방식은 객체 지향과 거리가 멀다
  - 객체지향 패러다임으로의 전환은 클래스가 아닌 객체에 초점을 맞춰야 한다.
    - 어떤 클래스가 필요한지 고민하기 전에 어떤 객체가 필요한지 고민
      - 클래스는 공통적인 상태와 행동을 공유하는 객체를 추상화
      - 어떤 객체들이 어떤 상태와 행동을 가지는지를 먼저 결정
    - 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다.
      - 설계를 유연하게 하고 확장 가능하게 한다
- 도메인의 구조를 따르는 프로그램 구조
  - 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야를 도메인이라고 한다
  - 요구사항과 객체라는 동일한 관점에서 바라볼 수 있기 때문에 도메인을 구성하는 개념들이 프로그램의 객체와 클래스로 매끄럽게 연결될 수 있다
- 클래스 구현
  - public/private 으로 나누는 것으로 어떤 부분을 외부에 공개하고 어떤 부분을 감출지 결정
    - 경계의 명확성이 객체의 자율성 보장한다
  - 자율적인 객체
    - 객체는 상태와 행동을 가진다
    - 객체는 스스로 판단하고 행동하는 자율적인 존재다
    - 캡슐화 : 데이터와 기능을 객체 내부로 함께 묶는 것
  - 프로그래머의 자유
    - 프로그래머의 역할 : 클래스 작성자 / 클라이언트 프로그래머
      - 클래스 작성자는 새로운 데이터 타입을 프로그램에 추가하고 클라이언트 프로그래머는 클래스 작성자가 추가한 데이터 타입을 사용
      - 구현 은닉 : 클래스 작성자가 클라이언트 프로그래머에게 필요한 부분만 공개하여 숨겨 놓은 부분에 접근할 수 없도록 방지함으로써 클라이언트 프로그래머에 대한 사이드 이펙트를 걱정하지 않고 내부 구현을 마음대로 변경할 수 있는 것
- 협력
  - 객체가 다른 객체와 상호작용할 수 있는 유일한 방법은 메시지를 전송하고 수신하는 것이다
    - 수신된 메시지를 처리하기 위한 자신만의 방법을 메서드 라고 부른다
  - 메시지와 메서드의 구분에서 다형성의 개념이 출발한다
- template method pattern : 부모 클래스에서 기본적인 알고리즘의 흐름을 구현하고 중간에 필요한 처리를 자식에게 위임
- 상속과 다형성
  - 다형성을 활용한 DIP 만족
  - 확장 가능한 객체지향 설계가 가지는 특징은 코드의 의존성과 실행 시점의 의존성이 서로 다를 수 있다. (movie 가 discount policy 를 의존 할 때 구현체를 어떤 것을 넘겨주냐에 따라)
    - 다만 코드를 이해하기 어려워 질 수 있음
- 차이에 의한 프로그래밍
  - 상속 : 코드를 재사용하기 위해 가장 널리 사용되는 방법
  - 부모 클래스와 다른 부분만을 추가해서 새로운 클래스를 쉽고 빠르게 만드는 방법을 차이에 의한 프로그래밍이라고 부른다.
- 상속과 인터페이스
  - 자식 클래스가 부모 클래스를 대신하는 것을 업캐스팅이라고 부른다.
- 다형성
  - 메시지와 메서드는 다른 개념이다.
    - money 에서 dicountpolicy.calculateDiscountAmount 를 호출해도, 실제 호출되는 메서드는 구현(amountDiscountPolicy, percentDiscountPolicy)에 따라 다르다
      - 다형성
    - 다형성은 객체지향 프로그램의 컴파일 타임 의존성과 런타임 의존성이 다를 수 있다는 사실을 기반으로 한다
    - 메시지와 메서드를 실행 시점에 바인딩한다
      - lazy binding, dynamic binding
    - 함수 호출처럼 컴파일 시점에 실행될 함수나 프로시저를 결정하는 것
      - early binding, static binding
- 추상화와 유연성
  - 추상화의 힘
    - 할인 정책
- 추상 클래스와 인터페이스 트레이드오프
- 코드 재사용
  - 상속보다 composition 이 더 좋다
- 상속
  - 상속은 캡슐화를 위반하고 설계를 유연하지 못하게 만든다.
  - 부모 클래스를 변경할 때 자식 클래스도 함꼐 변경될 확률을 높인다.
  - 상속 관계를 컴파일 시점에 결정하므로 런타임에 객체의 종류를 변경하는 것이 불가능하다
- composition
  - 인터페이스에 정의된 메시지를 통해서만 코드를 재사용하는 방법
  - 인터페이스에 정의된 메시지를 통해서만 재사용이 가능하기 대문에 구현을 효과적으로 캡슐화
  - 의존하는 인터페이스를 교체하는 것이 비교적 쉽기 때문에 설계를 유연하게 만듬
  - 느슨한 결합
