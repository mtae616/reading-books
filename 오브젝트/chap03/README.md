# 역할, 책임, 협력
- compile time DI
  - 정적 할당
  - checked exception
- runtime DI
  - 동적 할당
  - unchecked exception
  - 클래스 로더가 컴파일된 바이트코드를 불러올 때 발생
  - 컴파일 타임에 모든 클래스의 정보를 가지고 오지 않아도 되므로 메모리 낭비가 없다
  - 동적로딩에 시간이 필요하므로 성능 저하가 있을 수 있다

- 협력
  - 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용
  - 협력에 참여하기 위해 수행하는 로직 -> **책임**
  - 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **역할**을 구성
  - 메세지 전송은 유일한 커뮤니케이션 수단
  - 메세지를 수신한 객체는 메서드를 실행해 요청에 응답한다
    - 메세지를 어떻게 처리할지는 수신한 객체가 직접 결정한다
  - 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는 것
  - 협력이 설계를 위한 문맥을 결정한다.
    - 객체가 필요하다면 그 객체는 어떤 협력에 참여하고 있다는 것이고 객체는 적절한 행동을 보유하고 있다.
    - 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다.
    - 객체의 행동을 결정하는 것이 협력이라면 객체의 상태를 결정하는 것은 행동이다
      - 객체의 상태는 그 객체가 행동을 수행하는 데 필요한 정보가 무엇인지로 결정된다.
    - 협력은 객체를 설계하는 데 필요한 context 를 제공한다
      - 상태는 객체가 행동하는 데 필요한 정보에 의해 결정되고 행동은 협력 안에서 객체가 처리할 메시지로 결정된다.
      - 결과적으로 객체가 참여하는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다

- 책임
  - 협력에 참여하기 위해 객체가 수행하는 행동의 집합
  - 책임의 종류
    - 하는 것
      - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
      - 다른 객체의 행동을 시작시키는 것
      - 다른 객체의 활동을 제어하고 조절하는 것
    - 아는 것
      - 사적인 정보에 관해 아는 것
      - 관련된 객체에 관해 아는 것
      - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
  - 아는 것과 하는 것은 밀접하게 연관돼 있다
    - 단순한 책임이라고 생각했던 것이 여러 개의 메시지로 분할되기도 하고 하나의 객체가 수행할 수 있다고 생각했던 책임이 나중에 여러 객체들이 협력해야만 하는 커다란 책임으로 자라는 것이 일반적이다.
  - **책임은 객체지향 설계의 핵심이다**
    - 객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것
  - 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다
    - 정보 전문가 패턴
    - 일상 생활과 마찬가지로 어떤 정보에 대해 가장 잘 아는 전문가에게 동움을 청하는 것
    - 협력을 설계하는 출발점은 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라보는 것
  - 책임 주도 설계
    - 책임을 찾고 책임을 수행할 적절한 객체를 찾아 할당하는 방식으로 협력을 설계하는 방법
    - 과정
      - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
      - 시스템 책임을 더 작은 책임으로 분할한다.
      - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
      - 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
      - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.
  - 책임을 할당할 때 고려할 두가지
    - 메시지가 객체를 결정한다.
      - 최소한의 인터페이스를 가질 수 있게 된다
      - 추상적인 인터페이스를 가질 수 있게 된다.
        - 인터페이스는 무엇을 하는지를 표현하기 때문에
    - 행동이 상태를 결정한다.
      - 객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동
      - 협력 관계 속에서 다른 객체에게 무엇을 제공하고 받아야 할지 고민해야만 훌륭한 책임을 수확할 수 있다.
      - 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료

- 역할
  - 책임의 집합
  - 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있다.
  - 객체 대 역할
    - 협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다.
    - 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다
